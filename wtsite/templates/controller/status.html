{% extends "base.html" %}

{% load controller_extras %}

{% block title %}
   Washtub Liquidsoap Controller - Status
{% endblock title %}
{% block tabsetup %}
	$('#tabs').tabs();
{% endblock tabsetup %}
{% block content %}<div id="tabs">
			    <ul>
			    	<li><a href="{% url controller.views.display_nodes active_host %}">Status</a></li>
			    	<li><a href="{% url controller.views.display_queues active_host %}">Queues</a></li>
			    	<li><a href="#tabs-3">Pool</a></li>
			    	<li><a href="{% url controller.views.display_history active_host %}">History</a></li>
			    	<li><a href="{% url controller.views.display_help active_host %}">Help</a></li>
			    </ul>
			    <div id="tabs-1">
				</div>
			    <div id="tabs-2">
				</div>
			    <div id="tabs-3">
			    	  {% block pooltab %}
				    	  <form class="searchform" action="{% url controller.views.search_pool_page active_host 1 %}" method="GET">
							<input class="searchbox" type="text" name="search"></input>
							<input type="hidden" name="type" value="song"></input>
							<input class="searchbutton" type="submit" value="submit"></submit>
						 </form>
					   	  <b>Available Media(</b><i>{{ all_pages.count }} items found</i><b>):</b><br/>
					 		<table id="poolTable" class="tablesorter"> 
							<thead> 
							<tr> 
							    <th class="track">#</th> 
							    <th class="title">Title</th> 
							    <th class="artist">Artist</th> 
							    <th class="album">Album</th> 
							    <th class="genre">Genre</th>
							    <th class="lastplay">Last Played</th>
							    <th class="ops">Ops</th> 
							</tr>
					   	  	</thead>
					   	  	<tbody>
						   {% for entry in single_page.object_list %}
						 	<tr>
									<td class="track">{{ entry.track }}</td>
									<td>{{ entry.title|truncatewords:8 }}</td>
									<td>{{ entry.artist }}</td>
									<td>{{ entry.album|truncatewords:5 }}</td>
									<td>{{ entry.genre }}</td>
									{% if entry.lastplay %}
										<td>{{ listing.on_air }} {% now "T" %}</td>
									{% else %}
										<td></td>
									{% endif %}
									<td class="ops">
									<form name="queue_add_{{ entry.id }}" action="{% url controller.views.queue_push active_host %}" method="POST">
									<select name="queue" onchange="this.form.submit();">
									<option>&lt;add to queue&gt;</option>
									{% for item, type in node_list.items %}
										{% ifequal type "queue" %}
										<option value="{{ item }}">{{ item }}</option>
										{% endifequal %}
										{% ifequal type "editable" %}
										<option value="{{ item }}">{{ item }}</option>
										{% endifequal %}
									{% endfor %}
									</select>
									<input type="hidden" name="uri" value="{{ entry.id }}">
									</form>
									</td>
								</tr>
						   	{% endfor %}
					   	  	</tbody>
					   	  	</table>
					   	  	<br/>
					   	  	{% block pagination %}
					   	  	<div class="pagination"> 
								<span class="pagination-pre">
								{% if single_page.has_previous %}&larr;<a href="{% url controller.views.display_pool_page active_host "songs" single_page.previous_page_number %}">previous</a>{% endif %}
								</span>
								{% if single_page.number %}
								<span class="pagination-count">page {{ single_page.number }} of {{ single_page.paginator.num_pages }}</span>
								{% endif %}
								<span class="pagination-next">
								{% if single_page.has_next %}<a href="{% url controller.views.display_pool_page active_host "songs" single_page.next_page_number %}">next</a>&rarr;{% endif %}
								</span>
							</div>
							{% endblock pagination %}
			      {% endblock pooltab %}
				</div>
			    <div id="tabs-4">
				</div>
			    <div id="tabs-5">
				</div>
				</div>
			</div>
{% comment %}
<div id="accordion">
  <div>
	<h3><a href="#">Server Tools</a></h3>
		<div>
		    Tools.
		</div>
  </div>
  <div>
	<h3><a href="#">Second</a></h3>
		<div>Phasellus mattis tincidunt nibh.</div>
  </div>

  <div>
	<h3><a href="#">Third</a></h3>
		<div>Nam dui erat, auctor a, dignissim quis.</div>
	</div>
</div>
{% endcomment %}
{% endblock content %}